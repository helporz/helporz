!function(){"use strict";function e(e,r,n,t,o,i,u){var s={nearTaskList:[],selfInfo:null,userInfo:{}},a=function(e,t,o,i){var u={type:e,userinfo:t,smscode:o,terminalInfo:i};return r.info("login:"+JSON.stringify(u)),n.postForPromise("/user/verify_sms",u)},c=function(e,t,o){var i={ticket:e,sign:t,terminalInfo:o};return r.info("loginByTicket:"+JSON.stringify(i)),n.postForPromise("/user/login_by_ticket",i)},f=function(e,r){var t={ticket:e,sign:r};return n.postForPromise("/user/logout",t)},l=function(e,r,t,o){var i={packageVersion:e,terminalInfo:r};n.post("/user/check_update_package",i,function(e,r,n,o){t(e.data.downloadUrl,e.data.version,e.data.isMustUpdate)},function(e,r,n,t,i){o(e)},function(e,r,n,t){o(r)})},g=function(e,r){n.get("/user/get_self_info",null,function(r,n,t,o){e(r.data)},function(e,n,t,o,i){r(e)},function(e,n,t,o){r(n)})},d=function(){var r=e.defer();return n.get("/user/get_self_info",null,function(e,n,t,o){r.resolve(e.data),s.selfInfo=e.data},function(e,n,o,i,u){r.reject(t.getErrorCodeDescription(e))},function(e,n,t,i){r.reject(o.getErrorCodeDescription(n))}),r.promise},p=function(e,r,t){n.get("/user/"+e+"/get_user_info",null,function(n,t,o,i){r(n.data),s.userInfo[e]=n.data},function(e,r,n,o,i){t(e)},function(e,r,n,o){t(r)})},m=function(r){var t=e.defer(),o={nickname:r};return n.getForPromise("/user/get_user_info_by_nickname",o).then(function(e){console.log("get user info by nickname success:"+JSON.stringify(e)),s.userInfo[e.userId]=e,t.resolve(e)},function(e){t.reject(e)}),t.promise},v=function(e){var r={gender:e};return n.postForPromise("/user/self/update_gender",r)},I=function(e){var r={orgId:e};return n.postForPromise("/user/self/update_org",r)},_=function(e){var r={dormitory:e};return n.postForPromise("/user/self/update_dormitory",r)},F=function(e){var r={department:e};return n.postForPromise("/user/self/update_department",r)},P=function(e){var r={hometown:e};return n.postForPromise("/user/self/update_hometown",r)},k=function(e){var r={nickname:e};return n.postForPromise("/user/self/update_nickname",r)},y=function(e){var r={Connection:"close","x-login-key":u.getLoginTicket()};return i.uploadImgFile(e,appConfig.API_SVC_URL+"/user/self/upload_avatar",r)},h=function(e){var r={Connection:"close","x-login-key":u.getLoginTicket()};return i.uploadImgFile(e,appConfig.API_SVC_URL+"/user/self/id_card_photo_ex",r)},S=function(e){var r={sign:e};return n.postForPromise("/user/self/update_sign",r)},C=function(e,r){"undefined"!=typeof r&&null!=r&&""!==r||(r="未填写");var t={remark:r};return n.postForPromise("/user/attention/{userId}".replace("{userId}",e),t)},L=function(e){return n.postForPromise("/user/unattention/{userId}".replace("{userId}",e),null)},A=function(r,t){var o={pageIndex:r,pageSize:t},i=e.defer();return n.getForPromise("/user/attention",o).then(function(e){var r=new Array;if(null!=e&&e.length>0){i.resolve();var n=0;for(n=0;n<e.length;++n)null!=e[n].recentTaskIdArray&&e[n].recentTaskIdArray.length>0&&(r.push(e[n]),e[n]=null);for(n=0;n<e.length;++n)null!=e[n]&&r.push(e[n])}i.resolve(r)},function(e){i.reject(e)}),i.promise},T=function(e){return n.getForPromise("/user/attention/{userId}".replace("{userId}",e),null)},x=function(e,r){var t={pageIndex:e,pageSize:r};return n.getForPromise("/user/funs",t)},U=function(e,r){var t={pageIndex:e,pageSize:r};return n.getForPromise("/user/friends",t)},z=function(e,r){var t={pageIndex:e,pageSize:r};return n.getForPromise("/user/visitor",t)},N=function(){return n.getForPromise("/user/orgs",null)},O=function(e){return n.getForPromise("/user/org/{orgId}/memberCount".replace("{orgId}",e),null)},b=function(){return n.getForPromise("/user/tag/list",null)};return{login:a,loginByTicket:c,logout:f,checkUpdatePackage:l,getSelfInfo:g,getUserInfo:p,getUserInfoByNickname:m,getSelfInfoForPromise:d,updateGender:v,updateOrg:I,updateDepartment:F,updateDormitory:_,updateHometown:P,updateNickname:k,uploadAvatar:y,uploadIDCardPhoto:h,updateSign:S,attention:C,unattention:L,getAttentionList:A,isAttention:T,getFunsList:x,getFriendList:U,getVisitorList:z,getOrgList:N,getOrgMemberCount:O,getTagList:b,cache:s}}angular.module("com.helporz.user.netservice",["com.helporz.utils.service"]).factory("userNetService",["$q","$log","httpBaseService","errorCodeService","httpErrorCodeService","uploadService","userLoginInfoService",e])}();