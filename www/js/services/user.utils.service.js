!function(){"use strict";angular.module("app.user.utils.service",["com.helporz.user.netservice","main.userInfo"]).factory("userUtils",["userNetService","$state","$ionicLoading","$ionicPopup","$location","$log","mainUserInfoService",function(e,i,o,t,n,s,a){function l(e){e.ui_showFollow=!1,e.ui_showNeedHelp=e.recentTaskIdArray.length>0,e.ui_showHasFollow=0==e.isMutualAttention?1:2}function r(e){e.ui_showFollow=0==e.isMutualAttention,e.ui_showNeedHelp=!1,e.ui_showHasFollow=0==e.isMutualAttention?0:1}function u(n,s){if(0!=ho.isValid(n)&&""!=n){var l="main."+s+"_user-info";a.tabPath=s,e.cache.userInfo[n]?i.go(l,{id:n}):(o.show(),e.getUserInfo(n,function(e){console.log(e),i.go(l,{id:n}),o.hide()},function(e,i){t.alert({title:"错误提示",template:e.data.message}).then(function(i){console.error(e)}),o.hide()}))}}function g(e){if(0!=ho.isValid(e)&&""!=e){var o=n.path().split("/");if(o.length>0){for(var t=0;t<o.length&&"main"!==o[t];++t);if(t<o.length){var s="main."+o[t+1]+"_im-detail";i.go(s,{cid:e})}else i.go("main.me")}else i.go("main.me")}}function c(e,o){if(s.debug("go user tasks:"+e+" "+o),0!=ho.isValid(e)&&""!=e){var t=n.path().split("/");if(t.length>0){for(var a=0;a<t.length&&"main"!==t[a];++a);if(a<t.length){var l="main."+t[a+1]+"_user-tasks";i.go(l,{userId:e,nickname:o})}else i.go("main.me")}else i.go("main.me")}}function f(e){if(0!=ho.isValid(e)&&""!=e){var o=n.path().split("/");if(o.length>0){for(var t=0;t<o.length&&"main"!==o[t];++t);if(t<o.length){var s="main."+o[t+1]+"_user-tasks_task-detail";i.go(s,{id:e})}else i.go("main.me")}else i.go("main.me")}}return{uiProcessFollow:l,uiProcessFollowed:r,gotoUser:u,gotoIM:g,gotoUserTasks:c,gotoTaskDetail:f}}])}();