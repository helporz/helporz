!function(){"use strict";function e(){return{tabPath:""}}function t(e,t,o,n,s,r,a,i,c,u,f,l,I){console.log(n);var d=e.vm={};d.userInfo={},e.$on("$ionicView.beforeEnter",function(){d.userInfo.remoteData=a.cache.userInfo[n.id];var e=f.impressUI();d.userInfo.ui_tags=d.userInfo.remoteData.tags.concat(),d.userInfo.ui_tags=[e[0],e[2],e[3]],d.userInfo.isFollowed=!1;var t=a.cache.selfInfo.attentionList;for(var o in t)if(t[o].userId==d.userInfo.remoteData.userId){d.userInfo.isFollowed=!0;break}}),d.userInfo.accessUserAvatar=function(e){if(ho.isValid(d.userInfo.remoteData)){var t=d.userInfo.remoteData.accessUserList.length;return e<t?d.userInfo.remoteData.accessUserList[e].avatar:""}return""},d.cb_back=function(){c.goBack(-1)},d.userInfo.cb_visitorImg=function(e){console.log("click on image ["+e+"]");var t=d.userInfo.remoteData.accessUserList[e];l.gotoUser(t.userId,I.tabPath)},d.userInfo.cb_follow=function(){d.userInfo.isFollowed?u.show({titleText:"真的要取消关注么",buttons:[{text:"<b>是</b>"},{text:"<b>否</b>"}],buttonClicked:function(e){return 0==e&&(s.show(),a.unattention(d.userInfo.remoteData.userId).then(function(e){s.hide(),s.show({duration:1500,templateUrl:"modules/components/templates/ionic-loading/com-cancel-success.html"}),d.userInfo.isFollowed=!1;var t=a.cache.selfInfo.attentionList;for(var o in t)if(t[o].userId==d.userInfo.remoteData.userId){t.splice(o,1);break}var n=a.cache.selfInfo.funsList;for(var o in n)if(n[o].userId==e.data.userId){n[o].isMutualAttention=!1;break}},function(e){s.hide(),ho.alertObject(e)})["finally"](function(){})),!0},cancelText:"取消",cancel:function(){},destructiveButtonClicked:function(){}}):(s.show(),a.attention(d.userInfo.remoteData.userId).then(function(e){s.hide(),s.show({duration:1500,templateUrl:"modules/components/templates/ionic-loading/user-follow-success.html"}),d.userInfo.isFollowed=!0,a.cache.selfInfo.attentionList.splice(0,0,e.data);var t=a.cache.selfInfo.funsList;for(var o in t)if(t[o].userId==e.data.userId){t[o].isMutualAttention=!0;break}},function(e){s.hide(),ho.alertObject(e)})["finally"](function(){}))}}angular.module("main.userInfo").controller("mainUserInfoCtrl",["$scope","$timeout","$state","$stateParams","$ionicLoading","taskNetService","userNetService","taskUtils","$ionicHistory","$ionicActionSheet","impressUtils","userUtils","mainUserInfoService",t]).factory("mainUserInfoService",e)}();