!function(){"use strict";function t(t,e,s,a,o,m,n,r,i){console.log(s);var k=t.vm={};t.$on("$ionicView.beforeEnter",function(){var a=!0;k.task=o.getTaskInPostList(s.id),null==k.task&&(a=!1,k.task=o.getTaskInAcceptList(s.id)),k.task.icon=m.iconByTypeValue(k.task.taskTypesId),k.task.typeName=m.nameByTypeValue(k.task.taskTypesId),k.task.commentCount=k.task.commentList?k.task.commentList.length:0,k.task.ui_tags=[],n.netTagsToUiTags(k.task.ui_tags,k.task.poster.tags),m.taskStateToUiState(k.task,k.task.status,a),k.task.state=2;var i=r.cache.selfInfo;return void 0==i?void console.error("err: no selfInfo"):(k.showMyComment=!1,k.showOtherComment=!1,k.showState=0,a===!0?(0!=k.task.posterCommentLevel&&(k.showMyComment=!0,k.ui_myComment=k.task.posterComment,k.ui_myCommentLevel=""+k.task.posterCommentLevel,k.ui_myCommentTags=[],n.netTagsToUiTags(k.ui_myCommentTags,k.task.posterTags)),0!=k.task.accepterCommentLevel&&0!=k.task.posterCommentLevel&&(k.showOtherComment=!0,k.ui_otherComment=k.task.accepterComment,k.ui_otherCommentLevel=""+k.task.accepterCommentLevel,k.ui_otherCommentTags=[],n.netTagsToUiTags(k.ui_otherCommentTags,k.task.accepterTags)),"128"!=k.task.status&&"256"!=k.task.status||(0==k.task.posterCommentLevel?k.showState=1:0==k.task.accepterCommentLevel?k.showState=2:k.showState=0),"32"==k.task.status&&(k.task.posterComment||(k.showState=1))):(0!=k.task.posterCommentLevel&&0!=k.task.accepterCommentLevel&&(k.showOtherComment=!0,k.ui_otherComment=k.task.posterComment,k.ui_otherCommentLevel=""+k.task.posterCommentLevel,k.ui_otherCommentTags=[],n.netTagsToUiTags(k.ui_otherCommentTags,k.task.posterTags)),0!=k.task.accepterCommentLevel&&(k.showMyComment=!0,k.ui_myComment=k.task.accepterComment,k.ui_myCommentLevel=""+k.task.accepterCommentLevel,k.ui_myCommentTags=[],n.netTagsToUiTags(k.ui_myCommentTags,k.task.accepterTags)),"128"!=k.task.status&&"256"!=k.task.status||(0==k.task.accepterCommentLevel?k.showState=1:0==k.task.posterCommentLevel?k.showState=2:k.showState=0)),void e(function(){t.$apply()},0))}),k.cb_gotoUser=function(t){var e,s=a.$getByHandle("rootTabs").selectedIndex();0==s?e="near":4==s?e="me":3==s?e="task":ho.alert("gotoUser tab invalid, tabIndex="+s),i.gotoUser(t,e)}}angular.module("main.task.taskState").controller("mainTaskTaskStateCtrl",["$scope","$timeout","$stateParams","$ionicTabsDelegate","taskNetService","taskUtils","impressUtils","userNetService","userUtils",t])}();