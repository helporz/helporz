!function(){"use strict";function t(t,e,n,o,i,c,a,l,r,s,u,m,d,f,h){var p=t.vm={};p.cb_back=function(){a.goBack(-1)},t.$on("$ionicView.beforeEnter",function(){var t=h.cache.selfInfo;p.edit.avatar=t.avatar,p.edit.nickname=t.nickname,p.edit.org=t.orgList[0].name,p.edit.department=t.department,p.edit.dormitory=t.dormitory,p.edit.gender=1==t.gender?"男":"女",p.edit.hometown=t.hometown,p.edit.sign=t.sign}),p.edit={cb_avatar:function(){console.log("click on imag");l.show({titleText:"请选择图片来源",buttons:[{text:"照相机"},{text:"本地相薄"}],buttonClicked:function(t){function e(t){ho.alert("doUploadAvatar url="+t),r.show(),h.uploadAvatar(t).then(function(e){r.show({duration:1500,templateUrl:"modules/components/templates/ionic-loading/com-submit-success.html"}),h.cache.selfInfo.avatar=t,p.edit.avatar=t,ho.alert("url="+t)},function(t){r.hide(),ho.alert(ho.trace(obj))})["finally"](function(){})}if(0==t){var n={quality:100,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!0,encodingType:Camera.EncodingType.JPEG,targetWidth:200,targetHeight:200,mediaType:0,cameraDirection:0,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!0};u.getPicture(n).then(function(t){e(t)},function(t){alert("err: camera get picture err="+t)})}else{var n={maximumImagesCount:1,width:800,height:800,quality:80};m.getPictures(n).then(function(t){alert("imgUrls="+t+";imgUrls[0]="+t[0]),e(t[0])},function(t){alert("err: pick image, err="+t)})}return!0},cancelText:"取消",cancel:function(){},destructiveButtonClicked:function(){}})},cb_nickname:function(){f.title="修改昵称",f.isInputOrTextarea=!0,f.placeholder="起个好听的名字吧",f.className="",f.cb=function(t){r.show(),h.updateNickname(t).then(function(n){r.show({duration:1500,templateUrl:"modules/components/templates/ionic-loading/com-submit-success.html"}),h.cache.selfInfo.nickname=t,e(function(){a.goBack(-1)},1500)},function(t){s.alert({title:"错误提示",template:t}).then(function(e){console.error(t)})})["finally"](function(){})},n.go("main.edit-sheet")},cb_org:function(){r.show({duration:3e3,templateUrl:"modules/components/templates/ionic-loading/user-edit-org.html"})},cb_department:function(){f.title="修改院系",f.isInputOrTextarea=!0,f.placeholder="你是哪个系的",f.className="",f.cb=function(t){r.show(),h.updateDepartment(t).then(function(n){r.show({duration:1500,templateUrl:"modules/components/templates/ionic-loading/com-submit-success.html"}),h.cache.selfInfo.department=t,e(function(){a.goBack(-1)},1500)},function(t){s.alert({title:"错误提示",template:t}).then(function(e){console.error(t)})})["finally"](function(){})},n.go("main.edit-sheet")},cb_dormitory:function(){f.title="修改寝室楼栋",f.isInputOrTextarea=!0,f.placeholder="你是哪个寝室哪个楼的",f.className="",f.cb=function(t){r.show(),h.updateDormitory(t).then(function(n){r.show({duration:1500,templateUrl:"modules/components/templates/ionic-loading/com-submit-success.html"}),h.cache.selfInfo.dormitory=t,e(function(){a.goBack(-1)},1500)},function(t){s.alert({title:"错误提示",template:t}).then(function(e){console.error(t)})})["finally"](function(){})},n.go("main.edit-sheet")},cb_gender:function(){l.show({titleText:"请选择性别",buttons:[{text:"<b>男</b>"},{text:"<b>女</b>"}],buttonClicked:function(t){return r.show(),h.updateGender(t+1).then(function(e){r.hide(),r.show({duration:1500,templateUrl:"modules/components/templates/ionic-loading/com-submit-success.html"}),h.cache.selfInfo.gender=t+1,p.edit.gender=1==h.cache.selfInfo.gender?"男":"女"},function(t){s.alert({title:"错误提示",template:t}).then(function(e){console.error(t)})})["finally"](function(){}),!0},cancelText:"取消",cancel:function(){},destructiveButtonClicked:function(){}})},cb_hometown:function(){f.title="修改家乡",f.isInputOrTextarea=!0,f.placeholder="老家是哪里的",f.className="",f.cb=function(t){r.show(),h.updateHometown(t).then(function(n){r.show({duration:1500,templateUrl:"modules/components/templates/ionic-loading/com-submit-success.html"}),h.cache.selfInfo.hometown=t,e(function(){a.goBack(-1)},1500)},function(t){s.alert({title:"错误提示",template:t}).then(function(e){console.error(t)})})["finally"](function(){})},n.go("main.edit-sheet")},cb_sign:function(){f.title="修改个人签名",f.isInputOrTextarea=!0,f.placeholder="...",f.className="",f.cb=function(t){r.show(),h.updateSign(t).then(function(n){r.show({duration:1500,templateUrl:"modules/components/templates/ionic-loading/com-submit-success.html"}),h.cache.selfInfo.sign=t,e(function(){a.goBack(-1)},1500)},function(t){s.alert({title:"错误提示",template:t}).then(function(e){console.error(t)})})["finally"](function(){})},n.go("main.edit-sheet")}}}angular.module("main.edit").controller("mainEditCtrl",["$scope","$timeout","$state","$stateParams","taskNetService","taskUtils","$ionicHistory","$ionicActionSheet","$ionicLoading","$ionicPopup","$cordovaCamera","$cordovaImagePicker","$window","mainEditSheetService","userNetService",t])}();